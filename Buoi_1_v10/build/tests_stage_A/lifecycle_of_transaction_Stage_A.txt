✅ SƠ ĐỒ RAM: Khi create_transaction() đang chạy (dùng Library tĩnh, không dùng malloc)
Giả sử bạn gọi:

c
create_transaction(1, &library.books[3], &library.users[2]);


📊 RAM Layout trong khi create_transaction() chạy:
+-------------------------------+ ← Stack cao
| Return address                |
| Previous frame pointer        |
|-------------------------------|
| create_transaction() frame    |
|-------------------------------|
| id (int)                      |
| book (Book*)                  | → trỏ đến library.books[3]
| user (User*)                  | → trỏ đến library.users[2]
| t (Transaction*)              | → trỏ đến library.transactions[transaction_count]
+-------------------------------+
               ↓
+===============================================+
| Global/static memory (SRAM)                   |
|-----------------------------------------------|
| Library library;                               |
|  ├─ books[20]                                  |
|  │    • [3] → struct Book { ... }              |
|  ├─ users[10]                                  |
|  │    • [2] → struct User { ... }              |
|  ├─ transactions[20]                           |
|  │    • [transaction_count]                    |
|  │       ├─ id (int) = 1                       |
|  │       ├─ book = &library.books[3]           |
|  │       ├─ user = &library.users[2]           |
|  │       └─ is_active = true                   |
+===============================================+
| Event timeline[100]                            |
| • Log: TRANSACTION_CREATE (book_id=3, user_id=2)
+===============================================+
| Heap (unused)                                  | ❌ Không dùng
+-------------------------------+

🔍 Giải thích
book và user trong Transaction chỉ là con trỏ (8 bytes mỗi cái) → không chiếm nhiều RAM.

Chúng trỏ đến vùng library.books[] và library.users[] — nghĩa là không có bản sao, chỉ là liên kết.

Nếu bạn xóa user hoặc book, cần đánh dấu is_deleted = true, không nên xóa thật (sẽ làm Transaction trỏ vào vùng không hợp lệ)

