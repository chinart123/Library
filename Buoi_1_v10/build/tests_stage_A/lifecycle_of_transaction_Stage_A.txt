âœ… SÆ  Äá»’ RAM: Khi create_transaction() Ä‘ang cháº¡y (dÃ¹ng Library tÄ©nh, khÃ´ng dÃ¹ng malloc)
Giáº£ sá»­ báº¡n gá»i:

c
create_transaction(1, &library.books[3], &library.users[2]);


ğŸ“Š RAM Layout trong khi create_transaction() cháº¡y:
+-------------------------------+ â† Stack cao
| Return address                |
| Previous frame pointer        |
|-------------------------------|
| create_transaction() frame    |
|-------------------------------|
| id (int)                      |
| book (Book*)                  | â†’ trá» Ä‘áº¿n library.books[3]
| user (User*)                  | â†’ trá» Ä‘áº¿n library.users[2]
| t (Transaction*)              | â†’ trá» Ä‘áº¿n library.transactions[transaction_count]
+-------------------------------+
               â†“
+===============================================+
| Global/static memory (SRAM)                   |
|-----------------------------------------------|
| Library library;                               |
|  â”œâ”€ books[20]                                  |
|  â”‚    â€¢ [3] â†’ struct Book { ... }              |
|  â”œâ”€ users[10]                                  |
|  â”‚    â€¢ [2] â†’ struct User { ... }              |
|  â”œâ”€ transactions[20]                           |
|  â”‚    â€¢ [transaction_count]                    |
|  â”‚       â”œâ”€ id (int) = 1                       |
|  â”‚       â”œâ”€ book = &library.books[3]           |
|  â”‚       â”œâ”€ user = &library.users[2]           |
|  â”‚       â””â”€ is_active = true                   |
+===============================================+
| Event timeline[100]                            |
| â€¢ Log: TRANSACTION_CREATE (book_id=3, user_id=2)
+===============================================+
| Heap (unused)                                  | âŒ KhÃ´ng dÃ¹ng
+-------------------------------+

ğŸ” Giáº£i thÃ­ch
book vÃ  user trong Transaction chá»‰ lÃ  con trá» (8 bytes má»—i cÃ¡i) â†’ khÃ´ng chiáº¿m nhiá»u RAM.

ChÃºng trá» Ä‘áº¿n vÃ¹ng library.books[] vÃ  library.users[] â€” nghÄ©a lÃ  khÃ´ng cÃ³ báº£n sao, chá»‰ lÃ  liÃªn káº¿t.

Náº¿u báº¡n xÃ³a user hoáº·c book, cáº§n Ä‘Ã¡nh dáº¥u is_deleted = true, khÃ´ng nÃªn xÃ³a tháº­t (sáº½ lÃ m Transaction trá» vÃ o vÃ¹ng khÃ´ng há»£p lá»‡)

