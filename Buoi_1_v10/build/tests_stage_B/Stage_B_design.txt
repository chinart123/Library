â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 [ğŸ§  Application Layer]               â”‚
â”‚                                                      â”‚
â”‚  - main.c, test*.c                                   â”‚
â”‚  - Giao tiáº¿p vá»›i ngÆ°á»i dÃ¹ng / Giao diá»‡n dÃ²ng lá»‡nh   â”‚
â”‚  - Thá»±c thi use-case nhÆ° create_book, borrow_book   â”‚
â”‚                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚ gá»i hÃ m tá»«
                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               [ğŸ“š Library Logic Layer]               â”‚
â”‚                                                      â”‚
â”‚  - library.c: quáº£n lÃ½ toÃ n cá»¥c                       â”‚
â”‚  - book.c, user.c, transaction.c                     â”‚
â”‚  - timeline.c: lÆ°u lá»‹ch sá»­                          â”‚
â”‚  - Má»—i struct cÃ³ logic riÃªng: init, print, edit     â”‚
â”‚                                                      â”‚
â”‚  â• Stage B sáº½ thÃªm:                                  â”‚
â”‚     - flags.h: gom tráº¡ng thÃ¡i vÃ o bitfield          â”‚
â”‚     - bit_debug.c: in tráº¡ng thÃ¡i nhá»‹ phÃ¢n Ä‘á»ƒ debug  â”‚
â”‚     - permission.c (náº¿u cáº§n quáº£n lÃ½ quyá»n háº¡n)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚ thao tÃ¡c vá»›i dá»¯ liá»‡u
                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              [ğŸ’¾ Data Definition Layer]              â”‚
â”‚                                                      â”‚
â”‚  - definitions.h: cáº¥u hÃ¬nh chung & macro             â”‚
â”‚  - book.h, user.h, transaction.h                     â”‚
â”‚  - library.h: gá»™p táº¥t cáº£ láº¡i                        â”‚
â”‚                                                      â”‚
â”‚  â• Stage B sáº½ nÃ¢ng cáº¥p:                              â”‚
â”‚     - DÃ¹ng struct Flags thay cho bool                â”‚
â”‚     - Union/bitfield/bitmask cho struct compact hÆ¡n  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚ dÃ¹ng low-level type
                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              [ğŸ”¬ Debugging & Encoding Layer]         â”‚
â”‚                                                      â”‚
â”‚  - bit_debug.c: in nhá»‹ phÃ¢n, kiá»ƒm tra bit            â”‚
â”‚  - event_encode.c (náº¿u encode sá»± kiá»‡n gá»n)          â”‚
â”‚  - transaction_encode.c (tuá»³ chá»n)                  â”‚
â”‚                                                      â”‚
â”‚ âœ… GiÃºp debug trá»±c tiáº¿p trÃªn há»‡ nhÃºng                â”‚
â”‚ âœ… Chuáº©n bá»‹ sáºµn cho UART / lÆ°u file / EEPROM         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ§­ Lá»™ trÃ¬nh gá»£i Ã½ triá»ƒn khai tá»«ng bÆ°á»›c
ğŸ”¹ BÆ°á»›c 1: Chuáº©n hoÃ¡ Flags (an toÃ n vÃ  dá»… má»Ÿ rá»™ng)
Táº¡o flags.h

Refactor láº¡i Book, User, Transaction Ä‘á»ƒ dÃ¹ng Flags thay vÃ¬ bool

Cáº­p nháº­t logic á»Ÿ cÃ¡c .c (náº¿u cÃ³ is_deleted, is_active)

ğŸ”¹ BÆ°á»›c 2: Táº¡o cÃ´ng cá»¥ Debug
Viáº¿t bit_debug.c

HÃ m: print_flags_binary(const Flags*), print_struct_binary(void* ptr, size_t size)

ğŸ”¹ BÆ°á»›c 3: Encode compact struct (tuá»³ chá»n nÃ¢ng cao)
Táº¡o event_encode.c dÃ¹ng union Ä‘á»ƒ gá»™p type, book_id, user_id thÃ nh 32-bit

Chuáº©n bá»‹ tá»‘t náº¿u báº¡n muá»‘n gá»­i qua UART sau nÃ y

ğŸ”¹ BÆ°á»›c 4: Má»Ÿ rá»™ng tÃ­nh nÄƒng (tuá»³ chá»n sau)
DÃ¹ng flags Ä‘á»ƒ lÆ°u user type (admin, guest)

Hoáº·c dÃ¹ng union cho Transaction nhá» hÆ¡n

ThÃªm event_permission.c Ä‘á»ƒ kiá»ƒm tra quyá»n háº¡n

âœ… Tá»•ng káº¿t: Lá»£i Ã­ch cá»§a thiáº¿t káº¿ nÃ y
| Æ¯u Ä‘iá»ƒm     | Giáº£i thÃ­ch                                          |
| ----------- | --------------------------------------------------- |
| Gá»n RAM     | Giáº£m dÃ¹ng `bool` â†’ thay báº±ng bitfield trong 1 byte  |
| An toÃ n     | TrÃ¡nh lá»—i padding, trÃ¡nh dÃ¹ng `malloc`              |
| Debug dá»…    | In nhá»‹ phÃ¢n, biáº¿t chÃ­nh xÃ¡c Ä‘ang sai bit nÃ o        |
| Má»Ÿ rá»™ng tá»‘t | Cho phÃ©p thÃªm tÃ­nh nÄƒng vá» sau nhÆ° quyá»n, giao tiáº¿p |
